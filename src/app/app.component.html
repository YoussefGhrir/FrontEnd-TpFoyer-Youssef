<div class="container mt-4">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h3 class="mb-0">Liste des Étudiants</h3>
      <button class="btn btn-light" (click)="open(mymodal1, null)">+ Ajouter un nouvel étudiant</button>
    </div>
    <div class="card-body p-4">
      <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
        {{ successMessage }}
        <button type="button" class="btn-close" (click)="closeAlert()"></button>
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="closeAlert()"></button>
      </div>
      <div class="table-responsive">
        <table class="table table-hover table-bordered">
          <thead class="table-primary">
            <tr>
              <th>ID Étudiant</th>
              <th>Nom</th>
              <th>Prénom</th>
              <th>CIN</th>
              <th>Date de Naissance</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of listetudiants">
              <td>{{ p.idEtudiant }}</td>
              <td>{{ p.nomEtudiant }}</td>
              <td>{{ p.prenomEtudiant }}</td>
              <td>{{ p.cinEtudiant }}</td>
              <td>{{ p.dateNaissance | date: 'yyyy-MM-dd' }}</td>
              <td>
                <button class="btn btn-danger btn-sm" (click)="deleteEtudiant(p.idEtudiant)">Supprimer</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<ng-template #mymodal1 let-modal1>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-primary" id="modal-basic-title">Ajouter un nouvel étudiant</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal1.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="etudiant-nomEtudiant" class="form-label">Nom de l'étudiant</label>
            <input id="etudiant-nomEtudiant" class="form-control" type="text" placeholder="Nom d'étudiant"
                   [(ngModel)]="etudiant.nomEtudiant" [ngModelOptions]="{ standalone: true }">
          </div>
          <div class="mb-3">
            <label for="etudiant-prenomEtudiant" class="form-label">Prénom de l'étudiant</label>
            <input id="etudiant-prenomEtudiant" class="form-control" type="text" placeholder="Prénom d'étudiant"
                   [(ngModel)]="etudiant.prenomEtudiant" [ngModelOptions]="{ standalone: true }">
          </div>
          <div class="mb-3">
            <label for="etudiant-cinEtudiant" class="form-label">CIN de l'étudiant</label>
            <input id="etudiant-cinEtudiant" class="form-control" type="number" placeholder="CIN d'étudiant"
                   [(ngModel)]="etudiant.cinEtudiant" [ngModelOptions]="{ standalone: true }">
          </div>
          <div class="mb-3">
            <label for="etudiant-dateNaissance" class="form-label">Date de Naissance</label>
            <input id="etudiant-dateNaissance" class="form-control" type="date" 
                   [(ngModel)]="etudiant.dateNaissance" [ngModelOptions]="{ standalone: true }">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="addetudiant(etudiant); modal1.close('Save click')">
          Ajouter l'étudiant
        </button>
        <button type="button" class="btn btn-secondary" (click)="modal1.dismiss('Cancel click')">Annuler</button>
      </div>
    </div>
  </div>
</ng-template>
